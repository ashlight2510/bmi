<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- âœ… ê¸°ë³¸ SEO -->
    <title>BMI Survey | Fun Diet Plan</title>
    <meta
      name="description"
      content="A fun step-by-step BMI survey that gives personalized diet tips based on your style."
    />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href="/" />

    <!-- âœ… OG (ìš”êµ¬: og:image dummyimage + textëŠ” ì˜ì–´ë¡œ ì„œë¹„ìŠ¤ì— ë§ê²Œ) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="BMI Survey" />
    <meta
      property="og:description"
      content="Step-by-step survey â†’ fun BMI result â†’ personalized diet tips."
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0f172a/ffffff&text=BMI+Survey+Diet+Plan"
    />

    <!-- âœ… Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="BMI Survey" />
    <meta
      name="twitter:description"
      content="Step-by-step survey â†’ fun BMI result â†’ personalized diet tips."
    />
    <meta
      name="twitter:image"
      content="https://dummyimage.com/1200x630/0f172a/ffffff&text=BMI+Survey+Diet+Plan"
    />

    <!-- Google AdSense -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1204894220949193"
      crossorigin="anonymous"
    ></script>

    <!-- âœ… íŒŒë¹„ì½˜: ìë™ ìƒì„±(ì—¬ê¸°ì„œëŠ” SVG data URIë¡œ â€œí”„ë¡œì íŠ¸ë§ˆë‹¤â€ ì‰½ê²Œ ë°”ê¾¸ê²Œ ë§Œë“¤ì–´ë‘ ) -->
    <!-- ì•„ë˜ SERVICE_OG_TEXTë§Œ ë°”ê¾¸ë©´ íŒŒë¹„ì½˜ ê¸€ìë„ ê°™ì´ ë°”ë€Œê²Œ JSê°€ ì„¸íŒ…í•©ë‹ˆë‹¤ -->
    <link
      id="favicon"
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='22' fill='%230f172a'/%3E%3Ctext x='50' y='64' font-size='44' text-anchor='middle' fill='white' font-family='system-ui'%3EBMI%3C/text%3E%3C/svg%3E"
    />

    <style>
      :root {
        --bg: #0b1020;
        --card: rgba(255, 255, 255, 0.08);
        --line: rgba(255, 255, 255, 0.18);
        --text: #ffffff;
        --muted: rgba(255, 255, 255, 0.88);
        --accent: rgba(24, 213, 200, 0.9);
        --accent2: rgba(113, 97, 239, 0.95);
        --danger: #ffb4b4;
        --r: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR",
          sans-serif;
        background: radial-gradient(
            1200px 900px at 20% 10%,
            rgba(113, 97, 239, 0.22),
            transparent 55%
          ),
          radial-gradient(
            1000px 800px at 80% 10%,
            rgba(24, 213, 200, 0.18),
            transparent 55%
          ),
          var(--bg);
        color: var(--text);
        padding: 24px 14px;
      }
      .wrap {
        width: min(860px, 94vw);
      }
      .card {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: calc(var(--r) * 1.4);
        box-shadow: 0 22px 80px rgba(0, 0, 0, 0.38);
        overflow: hidden;
      }
      header {
        padding: 22px 22px 16px;
        border-bottom: 1px solid var(--line);
        background: linear-gradient(
          120deg,
          rgba(113, 97, 239, 0.28),
          rgba(24, 213, 200, 0.14)
        );
      }
      h1 {
        margin: 0 0 6px;
        font-size: 22px;
        letter-spacing: -0.3px;
        color: #ffffff;
        font-weight: 700;
      }
      .sub {
        margin: 0;
        color: rgba(255, 255, 255, 0.85);
        line-height: 1.45;
      }
      .content {
        padding: 18px 22px 22px;
        display: grid;
        gap: 14px;
      }
      .topbar {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border: 1px solid var(--line);
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.05);
        font-size: 13px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
      }
      .progress {
        flex: 1;
        min-width: 240px;
        height: 10px;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
      }
      .bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, var(--accent2), var(--accent));
        transition: width 0.35s ease;
      }
      .step {
        border: 1px solid var(--line);
        border-radius: calc(var(--r) * 1.2);
        background: rgba(255, 255, 255, 0.04);
        padding: 16px;
        display: none;
        gap: 12px;
      }
      .step.active {
        display: grid;
      }
      .q {
        display: flex;
        gap: 10px;
        align-items: flex-start;
      }
      .q .num {
        width: 34px;
        height: 34px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid var(--line);
        display: grid;
        place-items: center;
        font-weight: 800;
        color: #ffffff;
      }
      .q h2 {
        margin: 0;
        font-size: 18px;
        letter-spacing: -0.3px;
        color: #ffffff;
        font-weight: 600;
      }
      .q p {
        margin: 4px 0 0;
        color: rgba(255, 255, 255, 0.85);
        line-height: 1.5;
        font-size: 13px;
      }
      .choices {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      @media (max-width: 640px) {
        .choices {
          grid-template-columns: 1fr;
        }
      }
      .choice {
        padding: 12px 12px;
        border-radius: var(--r);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.05);
        cursor: pointer;
        transition: transform 0.05s ease, background 0.18s ease,
          border-color 0.18s ease;
        text-align: left;
      }
      .choice:hover {
        background: rgba(255, 255, 255, 0.08);
      }
      .choice:active {
        transform: scale(0.99);
      }
      .choice strong {
        display: block;
        font-size: 14px;
        color: #ffffff;
        font-weight: 600;
      }
      .choice span {
        display: block;
        margin-top: 4px;
        color: rgba(255, 255, 255, 0.85);
        font-size: 12.5px;
        line-height: 1.4;
      }
      .choice[aria-pressed="true"] {
        border-color: rgba(24, 213, 200, 0.5);
        background: rgba(24, 213, 200, 0.12);
      }
      .field {
        display: grid;
        gap: 8px;
      }
      label {
        font-size: 13px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
      }
      input {
        width: 100%;
        padding: 12px 12px;
        border-radius: var(--r);
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.08);
        color: #ffffff;
        outline: none;
        font-size: 14px;
      }
      input:focus {
        border-color: rgba(24, 213, 200, 0.55);
        box-shadow: 0 0 0 3px rgba(24, 213, 200, 0.15);
      }
      .row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        margin-top: 4px;
      }
      .btn {
        padding: 12px 14px;
        border-radius: var(--r);
        border: 1px solid var(--line);
        background: rgba(113, 97, 239, 0.45);
        color: #ffffff;
        cursor: pointer;
        font-weight: 700;
        font-size: 14px;
      }
      .btn:hover {
        background: rgba(113, 97, 239, 0.58);
      }
      .btn.ghost {
        background: rgba(255, 255, 255, 0.05);
      }
      .btn.ghost:hover {
        background: rgba(255, 255, 255, 0.09);
      }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .hint {
        font-size: 12.5px;
        color: rgba(255, 255, 255, 0.8);
        line-height: 1.45;
      }
      .warn {
        display: none;
        color: var(--danger);
        font-size: 12.5px;
        line-height: 1.45;
      }
      .result {
        border: 1px solid var(--line);
        border-radius: calc(var(--r) * 1.2);
        background: rgba(255, 255, 255, 0.04);
        padding: 16px;
        display: none;
        gap: 12px;
      }
      .result.show {
        display: grid;
      }
      .big {
        font-size: 36px;
        font-weight: 900;
        letter-spacing: -0.8px;
        line-height: 1.05;
        color: #ffffff;
      }
      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        width: fit-content;
        padding: 7px 10px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.06);
        font-size: 13px;
        color: rgba(255, 255, 255, 0.9);
        font-weight: 500;
      }
      .bmi-scale {
        display: grid;
        gap: 10px;
      }
      .scale-bar {
        position: relative;
        height: 12px;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.04);
      }
      .scale-bar .seg {
        height: 100%;
        float: left;
      }
      .seg.under {
        width: 17.5%;
        background: rgba(122, 204, 255, 0.65);
      }
      .seg.normal {
        width: 22.5%;
        background: rgba(24, 213, 200, 0.7);
      }
      .seg.over {
        width: 10%;
        background: rgba(255, 214, 102, 0.7);
      }
      .seg.obese {
        width: 50%;
        background: rgba(255, 140, 140, 0.75);
      }
      .scale-marker {
        position: absolute;
        top: -8px;
        width: 2px;
        height: 28px;
        background: #ffffff;
        box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.15);
        transform: translateX(-1px);
      }
      .scale-labels {
        display: flex;
        justify-content: space-between;
        font-size: 11.5px;
        color: rgba(255, 255, 255, 0.75);
      }
      .scale-caption {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.82);
      }
      .cards {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      @media (max-width: 720px) {
        .cards {
          grid-template-columns: 1fr;
        }
      }
      .mini {
        border: 1px solid var(--line);
        border-radius: var(--r);
        background: rgba(255, 255, 255, 0.05);
        padding: 12px;
      }
      .mini h3 {
        margin: 0 0 6px;
        font-size: 14px;
        color: #ffffff;
        font-weight: 600;
      }
      .mini p {
        margin: 0;
        color: rgba(255, 255, 255, 0.9);
        font-size: 12.8px;
        line-height: 1.5;
      }
      .hr {
        height: 1px;
        background: var(--line);
        margin: 6px 0;
      }
      .cta {
        margin-top: 6px;
      }
      .cta a {
        text-decoration: none;
        display: flex;
        width: 100%;
        align-items: center;
        justify-content: center;
        border-radius: 22px;
        border: 1px solid rgba(226, 232, 240, 0.25);
        background: rgba(226, 232, 240, 0.85);
        color: #0f172a;
        padding: 12px 14px;
        font-weight: 800;
        transition: background 0.18s ease;
      }
      .cta a:hover {
        background: rgba(226, 232, 240, 0.75);
      }
      .cta svg {
        margin-left: 8px;
        width: 20px;
        height: 20px;
      }
      footer {
        margin-top: 10px;
        color: rgba(255, 255, 255, 0.75);
        font-size: 12px;
        line-height: 1.45;
        padding: 0 6px;
      }
      code.k {
        background: rgba(255, 255, 255, 0.08);
        padding: 2px 6px;
        border-radius: 8px;
        border: 1px solid var(--line);
        color: rgba(255, 255, 255, 0.9);
      }
    </style>
    <style>
    .adsense-block {
      margin: 16px 0;
      display: flex;
      justify-content: center;
    }
    .adsbygoogle {
      display: block;
      margin: 16px auto;
        text-align: center;
}
    .lang-switch {
      position: fixed;
      top: 16px;
      right: 16px;
      display: inline-flex;
      gap: 0;
      padding: 3px;
      border-radius: 999px;
      background: rgba(11, 16, 32, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      z-index: 100;
      border: 1px solid rgba(24, 213, 200, 0.2);
    }
    .lang-switch button {
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.6);
      font-size: 12px;
      font-weight: 700;
      padding: 7px 14px;
      border-radius: 999px;
      cursor: pointer;
      transition: all 0.2s ease;
      min-width: 44px;
      text-align: center;
      letter-spacing: 0.02em;
    }
    .lang-switch button.active {
      background: rgba(24, 213, 200, 0.3);
      color: #fff;
      box-shadow: 0 2px 8px rgba(24, 213, 200, 0.4);
    }
    .lang-switch button:not(.active):hover {
      background: rgba(24, 213, 200, 0.1);
      color: rgba(255, 255, 255, 0.9);
    }
  </style>
</head>

  <body>
    <div class="lang-switch" role="tablist" aria-label="Language switcher">
      <button type="button" data-lang="ko" class="active">KR</button>
      <button type="button" data-lang="en">EN</button>
    </div>
    <div class="wrap">
      <div class="card">
        <header>
          <h1 id="serviceTitle" data-i18n="title">BMI ì„¤ë¬¸í˜• ë‹¤ì´ì–´íŠ¸ í”Œëœ</h1>
          <p class="sub" data-i18n="subtitle">
            í•œ ë²ˆì”©ë§Œ ë”¸ê°. ìˆ«ìë„ í•œ ë²ˆì”©ë§Œ. ê·¸ë¦¬ê³  ê²°ê³¼ëŠ”â€¦ ì€ê·¼íˆ ë„ì›€ ë¨.
          </p>
        </header>

        <section class="content">
          <div class="topbar">
            <div class="pill" id="stepLabel">STEP 1 / 7</div>
            <div class="progress" aria-label="progress">
              <div class="bar" id="bar"></div>
            </div>
            <button class="btn ghost" id="restartBtn" type="button" data-i18n="restartBtn">
              ì²˜ìŒë¶€í„°
            </button>
          </div>

          <!-- STEP 1 -->
          <div class="step active" data-step="1">
            <div class="q">
              <div class="num">1</div>
              <div>
                <h2 data-i18n="step1Title">ë‹¹ì‹ ì˜ ëª©í‘œëŠ”?</h2>
                <p data-i18n="step1Desc">ì„±ê²©(?)ì— ë”°ë¼ í”Œëœì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="choices" role="group" aria-label="goal">
              <button
                class="choice"
                type="button"
                data-key="goal"
                data-val="fatloss"
              >
                <strong data-i18n="goalFatloss">ì§€ë°© ê°ëŸ‰</strong><span data-i18n="goalFatlossDesc">ì²´ì§€ë°© ìœ„ì£¼ë¡œ ì­‰ì­‰</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="goal"
                data-val="recomp"
              >
                <strong data-i18n="goalRecomp">ì²´í˜• ê°œì„ </strong><span data-i18n="goalRecompDesc">ê·¼ìœ¡ì€ ì§€í‚¤ê³  ë¼ì¸ ì •ë¦¬</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="goal"
                data-val="health"
              >
                <strong data-i18n="goalHealth">ê±´ê°• ìŠµê´€</strong><span data-i18n="goalHealthDesc">ë¬´ë¦¬ ì—†ì´ ì˜¤ë˜ ê°€ëŠ” ë°©ì‹</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="goal"
                data-val="quickstart"
              >
                <strong data-i18n="goalQuickstart">ë¹ ë¥¸ ìŠ¤íƒ€íŠ¸</strong><span data-i18n="goalQuickstartDesc">ì¼ë‹¨ ì‹œì‘ì´ ë°˜ì´ë‹ˆê¹Œ</span>
              </button>
            </div>
            <div class="row">
              <span class="hint" data-i18n="step1Hint">ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</span>
              <button class="btn" type="button" data-next data-i18n="btnNext">ë‹¤ìŒ</button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 2 -->
          <div class="step" data-step="2">
            <div class="q">
              <div class="num">2</div>
              <div>
                <h2 data-i18n="step2Title">ì‹ì‚¬ ìŠ¤íƒ€ì¼ì€?</h2>
                <p data-i18n="step2Desc">ë‹¹ì‹ ì˜ "í˜„ì‹¤ ë£¨í‹´"ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="choices" role="group" aria-label="eating">
              <button
                class="choice"
                type="button"
                data-key="eating"
                data-val="snacker"
              >
                <strong data-i18n="eatingSnacker">ê°„ì‹ íŒŒí‹°í˜•</strong><span data-i18n="eatingSnackerDesc">ìì˜í•˜ê²Œ ìì£¼ ë¨¹ëŠ” í¸</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="eating"
                data-val="bigmeals"
              >
                <strong data-i18n="eatingBigmeals">í•œ ë²ˆì— í¬ê²Œí˜•</strong><span data-i18n="eatingBigmealsDesc">í•œ ë¼ì— ëª°ì•„ì„œ ë¨¹ëŠ” í¸</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="eating"
                data-val="late"
              >
                <strong data-i18n="eatingLate">ì•¼ì‹/ëŠ¦ì€ì‹ì‚¬í˜•</strong><span data-i18n="eatingLateDesc">ë°¤ì— í˜ì´ ë‚˜ëŠ” í¸</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="eating"
                data-val="regular"
              >
                <strong data-i18n="eatingRegular">ê·œì¹™ëŸ¬</strong><span data-i18n="eatingRegularDesc">ëŒ€ì²´ë¡œ ì¼ì •í•œ í¸</span>
              </button>
            </div>
            <div class="row">
              <button class="btn ghost" type="button" data-prev data-i18n="btnPrev">ì´ì „</button>
              <button class="btn" type="button" data-next data-i18n="btnNext">ë‹¤ìŒ</button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 3 -->
          <div class="step" data-step="3">
            <div class="q">
              <div class="num">3</div>
              <div>
                <h2 data-i18n="step3Title">ìš´ë™ì€ ì–´ë–¤ íƒ€ì…?</h2>
                <p data-i18n="step3Desc">"ì‹í›„ ìš´ë™/ê·¼ë ¥/ìœ ì‚°ì†Œ" ë¹„ìœ¨ ì¶”ì²œì— ë°˜ì˜ë©ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="choices" role="group" aria-label="activity">
              <button
                class="choice"
                type="button"
                data-key="activity"
                data-val="none"
              >
                <strong data-i18n="activityNone">ê±°ì˜ ì•ˆ í•¨</strong><span data-i18n="activityNoneDesc">ì§€ê¸ˆì€â€¦ ë§ˆìŒë§Œ ìš´ë™ ì¤‘</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="activity"
                data-val="walk"
              >
                <strong data-i18n="activityWalk">ê±·ê¸°/ê°€ë²¼ì›€</strong><span data-i18n="activityWalkDesc">ì‚°ì±…ì€ ì˜í•¨ (ì¢‹ìŒ)</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="activity"
                data-val="gym"
              >
                <strong data-i18n="activityGym">ê·¼ë ¥ ìœ„ì£¼</strong><span data-i18n="activityGymDesc">í—¬ìŠ¤ì¥/í™ˆíŠ¸ë¡œ ê·¼ìœ¡ ì§€í‚¤ê¸°</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="activity"
                data-val="mixed"
              >
                <strong data-i18n="activityMixed">í˜¼í•©í˜•</strong><span data-i18n="activityMixedDesc">ìœ ì‚°ì†Œ+ê·¼ë ¥ ì ë‹¹íˆ</span>
              </button>
            </div>
            <div class="row">
              <button class="btn ghost" type="button" data-prev data-i18n="btnPrev">ì´ì „</button>
              <button class="btn" type="button" data-next data-i18n="btnNext">ë‹¤ìŒ</button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 4 -->
          <div class="step" data-step="4">
            <div class="q">
              <div class="num">4</div>
              <div>
                <h2 data-i18n="step4Title">ë‹¹ì‹ ì˜ "ë°°ê³ í”” íŒ¨í„´"ì€?</h2>
                <p data-i18n="step4Desc">ê°„í—ì  ë‹¨ì‹/í˜ˆë‹¹ê´€ë¦¬/ì‹ì‚¬ íƒ€ì´ë° ì¶”ì²œì— ë°˜ì˜í•©ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="choices" role="group" aria-label="hunger">
              <button
                class="choice"
                type="button"
                data-key="hunger"
                data-val="morning"
              >
                <strong data-i18n="hungerMorning">ì•„ì¹¨ë¶€í„° ë°°ê³ í””</strong><span data-i18n="hungerMorningDesc">ëˆˆ ëœ¨ë©´ ìœ„ê°€ ì¶œê·¼í•¨</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="hunger"
                data-val="evening"
              >
                <strong data-i18n="hungerEvening">ì €ë…ì— í­ë°œ</strong><span data-i18n="hungerEveningDesc">í‡´ê·¼í•˜ë©´ ë°°ê³ í””ë„ í‡´ê·¼ ì•ˆ í•¨</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="hunger"
                data-val="random"
              >
                <strong data-i18n="hungerRandom">ëœë¤</strong><span data-i18n="hungerRandomDesc">ë°°ê³ í””ì´ ììœ ì˜í˜¼</span>
              </button>
              <button
                class="choice"
                type="button"
                data-key="hunger"
                data-val="stable"
              >
                <strong data-i18n="hungerStable">ëŒ€ì²´ë¡œ ì•ˆì •ì </strong><span data-i18n="hungerStableDesc">íŒ¨í„´ì´ ìˆëŠ” í¸</span>
              </button>
            </div>
            <div class="row">
              <button class="btn ghost" type="button" data-prev data-i18n="btnPrev">ì´ì „</button>
              <button class="btn" type="button" data-next data-i18n="btnNext">ë‹¤ìŒ</button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 5 (ìˆ«ì ì…ë ¥ 1/2) -->
          <div class="step" data-step="5">
            <div class="q">
              <div class="num">5</div>
              <div>
                <h2 data-i18n="step5Title">í‚¤ëŠ” ëª‡ cm?</h2>
                <p data-i18n="step5Desc">ìˆ«ìëŠ” ë”± í•œ ë²ˆë§Œ. (ë‘ ë²ˆ ì…ë ¥í•˜ë©´â€¦ ê·€ì°®ì•„ìš”)</p>
              </div>
            </div>
            <div class="field">
              <label for="height" data-i18n="heightLabel">í‚¤ (cm)</label>
              <input
                id="height"
                type="number"
                inputmode="decimal"
                data-i18n-placeholder="heightPlaceholder"
                placeholder="ì˜ˆ: 170"
                min="80"
                max="230"
              />
              <div class="hint" data-i18n="heightHint">ë‹¨ìœ„ëŠ” cm. (më¡œ ì…ë ¥í•˜ë©´ BMIê°€ ì‚ë—í•©ë‹ˆë‹¤)</div>
            </div>
            <div class="row">
              <button class="btn ghost" type="button" data-prev data-i18n="btnPrev">ì´ì „</button>
              <button class="btn" type="button" data-next data-i18n="btnNext">ë‹¤ìŒ</button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 6 (ìˆ«ì ì…ë ¥ 2/2) -->
          <div class="step" data-step="6">
            <div class="q">
              <div class="num">6</div>
              <div>
                <h2 data-i18n="step6Title">ëª¸ë¬´ê²ŒëŠ” ëª‡ kg?</h2>
                <p data-i18n="step6Desc">ì—¬ê¸°ë„ í•œ ë²ˆë§Œ. (ì •ì§í•¨ì€ ê±´ê°•ì˜ ì²«ê±¸ìŒ)</p>
              </div>
            </div>
            <div class="field">
              <label for="weight" data-i18n="weightLabel">ëª¸ë¬´ê²Œ (kg)</label>
              <input
                id="weight"
                type="number"
                inputmode="decimal"
                data-i18n-placeholder="weightPlaceholder"
                placeholder="ì˜ˆ: 65"
                min="20"
                max="250"
              />
              <div class="hint" data-i18n="weightHint">ë‹¨ìœ„ëŠ” kg. (ê·¼ìœ¡ 30kgì´ë©´ ì´ë¯¸ ìƒìœ„ê¶Œ)</div>
            </div>
            <div class="row">
              <button class="btn ghost" type="button" data-prev>ì´ì „</button>
              <button class="btn" type="button" id="finishBtn" data-i18n="btnViewResult">
                ê²°ê³¼ ë³´ê¸°
              </button>
            </div>
            <div class="warn"></div>
          </div>

          <!-- STEP 7 (ê²°ê³¼) -->
          <div class="result" id="result">
            <div class="badge" id="badge" data-i18n="resultGenerating">ğŸ§¾ ê²°ê³¼ ìƒì„± ì¤‘â€¦</div>
            <div class="big" id="bmiBig">â€”</div>
            <div class="hint" id="funLine">â€”</div>
            <div class="bmi-scale" aria-label="BMI ë¶„í¬ ìœ„ì¹˜">
              <div class="scale-caption" id="bmiCaption">BMI ìœ„ì¹˜: â€”</div>
              <div class="scale-bar" role="img" aria-label="BMI êµ¬ê°„ ê·¸ë˜í”„">
                <span class="seg under"></span>
                <span class="seg normal"></span>
                <span class="seg over"></span>
                <span class="seg obese"></span>
                <span class="scale-marker" id="bmiMarker"></span>
              </div>
              <div class="scale-labels">
                <span data-i18n="bmiScaleUnder">ì €ì²´ì¤‘ 18.5</span>
                <span data-i18n="bmiScaleNormal">ì •ìƒ 23</span>
                <span data-i18n="bmiScaleOver">ê³¼ì²´ì¤‘ 25</span>
                <span data-i18n="bmiScaleObese">ë¹„ë§Œ 30+</span>
              </div>
            </div>

            <div class="hr"></div>

            <div class="cards">
              <div class="mini">
                <h3 data-i18n="resultCardOneLiner">ë‹¹ì‹  ë§ì¶¤ "í•µì‹¬ í•œ ì¤„"</h3>
                <p id="oneLiner">â€”</p>
              </div>
              <div class="mini">
                <h3 data-i18n="resultCardPriority">ì´ë²ˆ ì£¼ ì‹¤ì²œ 1ìˆœìœ„</h3>
                <p id="priorityTip">â€”</p>
              </div>
              <div class="mini">
                <h3 data-i18n="resultCardAfterMeal">ì‹í›„ ìš´ë™ (ë”± ì´ë§Œí¼)</h3>
                <p id="afterMeal">â€”</p>
              </div>
              <div class="mini">
                <h3 data-i18n="resultCardGlucose">í˜ˆë‹¹/ê°„ì‹ ê´€ë¦¬ íŒ</h3>
                <p id="glucose">â€”</p>
              </div>
              <div class="mini">
                <h3 data-i18n="resultCardIF">ê°„í—ì  ë‹¨ì‹ (ê°€ëŠ¥í•˜ë©´)</h3>
                <p id="ifTip">â€”</p>
              </div>
              <div class="mini">
                <h3 data-i18n="resultCardWorkout">ìš´ë™ êµ¬ì„± ì œì•ˆ</h3>
                <p id="workout">â€”</p>
              </div>
            </div>

            <!-- âœ… ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸° ë²„íŠ¼ (ìš”êµ¬ ì½”ë“œ + ìœ„ì¹˜: ê²°ê³¼ í•˜ë‹¨ CTA) -->
            <div class="cta">
              <a
                href="https://funnyfunny.cloud"
                target="_blank"
                rel="noopener noreferrer"
              >
                <span data-i18n="btnMoreTests">ë” ë§ì€ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°</span>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 4.5H19.5V10.5M11.25 12.75L19.5 4.5M18 13.5V18.75C18 19.9926 16.9926 21 15.75 21H6.75C5.50736 21 4.5 19.9926 4.5 18.75V9.75C4.5 8.50736 5.50736 7.5 6.75 7.5H12"
                  ></path>
                </svg>
              </a>
            </div>

            <div class="row">
              <button class="btn ghost" type="button" id="backToSurvey" data-i18n="btnRestartSurvey">
                ì„¤ë¬¸ ë‹¤ì‹œí•˜ê¸°
              </button>
              <button class="btn" type="button" id="copyBtn" data-i18n="btnCopyResult">
                ê²°ê³¼ ë¬¸êµ¬ ë³µì‚¬
              </button>
            </div>

            <p class="hint" data-i18n="resultDisclaimer">
              ì°¸ê³ : ë³¸ ê²°ê³¼ëŠ” ì¬ë¯¸ + ì¼ë°˜ ì •ë³´ ëª©ì ì…ë‹ˆë‹¤. ê°œì¸ ê±´ê°•
              ìƒíƒœ/ì§ˆí™˜/ì•½ ë³µìš© ë“±ì´ ìˆìœ¼ë©´ ì „ë¬¸ê°€ ìƒë‹´ì´ ì•ˆì „í•©ë‹ˆë‹¤.
            </p>
          </div>
        </section>
      </div>
    </div>

    <script>
      /***************
       * í”„ë¡œì íŠ¸ë³„ë¡œ â€œìë™ ì„¸íŒ…â€í•˜ê¸° ì‰½ê²Œ ë§Œë“  ìƒìˆ˜ë“¤
       ***************/
      /* i18n */
      const translations = {
        ko: {
          metaTitle: "BMI ì„¤ë¬¸í˜• ë‹¤ì´ì–´íŠ¸ í”Œëœ | ì¬ë¯¸ìˆëŠ” ë‹¤ì´ì–´íŠ¸ ê³„íš",
          metaDescription: "ë‹¨ê³„ë³„ BMI ì„¤ë¬¸ìœ¼ë¡œ ê°œì¸ ë§ì¶¤ ë‹¤ì´ì–´íŠ¸ íŒì„ ë°›ì•„ë³´ì„¸ìš”.",
          title: "BMI ì„¤ë¬¸í˜• ë‹¤ì´ì–´íŠ¸ í”Œëœ",
          subtitle: "í•œ ë²ˆì”©ë§Œ ë”¸ê°. ìˆ«ìë„ í•œ ë²ˆì”©ë§Œ. ê·¸ë¦¬ê³  ê²°ê³¼ëŠ”â€¦ ì€ê·¼íˆ ë„ì›€ ë¨.",
          restartBtn: "ì²˜ìŒë¶€í„°",
          stepLabel: "STEP {current} / {total}",
          resultLabel: "RESULT / 7",
          // Step 1
          step1Title: "ë‹¹ì‹ ì˜ ëª©í‘œëŠ”?",
          step1Desc: "ì„±ê²©(?)ì— ë”°ë¼ í”Œëœì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.",
          goalFatloss: "ì§€ë°© ê°ëŸ‰",
          goalFatlossDesc: "ì²´ì§€ë°© ìœ„ì£¼ë¡œ ì­‰ì­‰",
          goalRecomp: "ì²´í˜• ê°œì„ ",
          goalRecompDesc: "ê·¼ìœ¡ì€ ì§€í‚¤ê³  ë¼ì¸ ì •ë¦¬",
          goalHealth: "ê±´ê°• ìŠµê´€",
          goalHealthDesc: "ë¬´ë¦¬ ì—†ì´ ì˜¤ë˜ ê°€ëŠ” ë°©ì‹",
          goalQuickstart: "ë¹ ë¥¸ ìŠ¤íƒ€íŠ¸",
          goalQuickstartDesc: "ì¼ë‹¨ ì‹œì‘ì´ ë°˜ì´ë‹ˆê¹Œ",
          step1Hint: "ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.",
          // Step 2
          step2Title: "ì‹ì‚¬ ìŠ¤íƒ€ì¼ì€?",
          step2Desc: "ë‹¹ì‹ ì˜ \"í˜„ì‹¤ ë£¨í‹´\"ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.",
          eatingSnacker: "ê°„ì‹ íŒŒí‹°í˜•",
          eatingSnackerDesc: "ìì˜í•˜ê²Œ ìì£¼ ë¨¹ëŠ” í¸",
          eatingBigmeals: "í•œ ë²ˆì— í¬ê²Œí˜•",
          eatingBigmealsDesc: "í•œ ë¼ì— ëª°ì•„ì„œ ë¨¹ëŠ” í¸",
          eatingLate: "ì•¼ì‹/ëŠ¦ì€ì‹ì‚¬í˜•",
          eatingLateDesc: "ë°¤ì— í˜ì´ ë‚˜ëŠ” í¸",
          eatingRegular: "ê·œì¹™ëŸ¬",
          eatingRegularDesc: "ëŒ€ì²´ë¡œ ì¼ì •í•œ í¸",
          // Step 3
          step3Title: "ìš´ë™ì€ ì–´ë–¤ íƒ€ì…?",
          step3Desc: "\"ì‹í›„ ìš´ë™/ê·¼ë ¥/ìœ ì‚°ì†Œ\" ë¹„ìœ¨ ì¶”ì²œì— ë°˜ì˜ë©ë‹ˆë‹¤.",
          activityNone: "ê±°ì˜ ì•ˆ í•¨",
          activityNoneDesc: "ì§€ê¸ˆì€â€¦ ë§ˆìŒë§Œ ìš´ë™ ì¤‘",
          activityWalk: "ê±·ê¸°/ê°€ë²¼ì›€",
          activityWalkDesc: "ì‚°ì±…ì€ ì˜í•¨ (ì¢‹ìŒ)",
          activityGym: "ê·¼ë ¥ ìœ„ì£¼",
          activityGymDesc: "í—¬ìŠ¤ì¥/í™ˆíŠ¸ë¡œ ê·¼ìœ¡ ì§€í‚¤ê¸°",
          activityMixed: "í˜¼í•©í˜•",
          activityMixedDesc: "ìœ ì‚°ì†Œ+ê·¼ë ¥ ì ë‹¹íˆ",
          // Step 4
          step4Title: "ë‹¹ì‹ ì˜ \"ë°°ê³ í”” íŒ¨í„´\"ì€?",
          step4Desc: "ê°„í—ì  ë‹¨ì‹/í˜ˆë‹¹ê´€ë¦¬/ì‹ì‚¬ íƒ€ì´ë° ì¶”ì²œì— ë°˜ì˜í•©ë‹ˆë‹¤.",
          hungerMorning: "ì•„ì¹¨ë¶€í„° ë°°ê³ í””",
          hungerMorningDesc: "ëˆˆ ëœ¨ë©´ ìœ„ê°€ ì¶œê·¼í•¨",
          hungerEvening: "ì €ë…ì— í­ë°œ",
          hungerEveningDesc: "í‡´ê·¼í•˜ë©´ ë°°ê³ í””ë„ í‡´ê·¼ ì•ˆ í•¨",
          hungerRandom: "ëœë¤",
          hungerRandomDesc: "ë°°ê³ í””ì´ ììœ ì˜í˜¼",
          hungerStable: "ëŒ€ì²´ë¡œ ì•ˆì •ì ",
          hungerStableDesc: "íŒ¨í„´ì´ ìˆëŠ” í¸",
          // Step 5
          step5Title: "í‚¤ëŠ” ëª‡ cm?",
          step5Desc: "ìˆ«ìëŠ” ë”± í•œ ë²ˆë§Œ. (ë‘ ë²ˆ ì…ë ¥í•˜ë©´â€¦ ê·€ì°®ì•„ìš”)",
          heightLabel: "í‚¤ (cm)",
          heightPlaceholder: "ì˜ˆ: 170",
          heightHint: "ë‹¨ìœ„ëŠ” cm. (më¡œ ì…ë ¥í•˜ë©´ BMIê°€ ì‚ë—í•©ë‹ˆë‹¤)",
          // Step 6
          step6Title: "ëª¸ë¬´ê²ŒëŠ” ëª‡ kg?",
          step6Desc: "ì—¬ê¸°ë„ í•œ ë²ˆë§Œ. (ì •ì§í•¨ì€ ê±´ê°•ì˜ ì²«ê±¸ìŒ)",
          weightLabel: "ëª¸ë¬´ê²Œ (kg)",
          weightPlaceholder: "ì˜ˆ: 65",
          weightHint: "ë‹¨ìœ„ëŠ” kg. (ê·¼ìœ¡ 30kgì´ë©´ ì´ë¯¸ ìƒìœ„ê¶Œ)",
          // Buttons
          btnPrev: "ì´ì „",
          btnNext: "ë‹¤ìŒ",
          btnViewResult: "ê²°ê³¼ ë³´ê¸°",
          btnRestartSurvey: "ì„¤ë¬¸ ë‹¤ì‹œí•˜ê¸°",
          btnCopyResult: "ê²°ê³¼ ë¬¸êµ¬ ë³µì‚¬",
          btnMoreTests: "ë” ë§ì€ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°",
          // Result
          resultGenerating: "ğŸ§¾ ê²°ê³¼ ìƒì„± ì¤‘â€¦",
          bmiLocation: "BMI ìœ„ì¹˜: {value} ({status})",
          bmiScaleUnder: "ì €ì²´ì¤‘ 18.5",
          bmiScaleNormal: "ì •ìƒ 23",
          bmiScaleOver: "ê³¼ì²´ì¤‘ 25",
          bmiScaleObese: "ë¹„ë§Œ 30+",
          resultCardOneLiner: "ë‹¹ì‹  ë§ì¶¤ \"í•µì‹¬ í•œ ì¤„\"",
          resultCardPriority: "ì´ë²ˆ ì£¼ ì‹¤ì²œ 1ìˆœìœ„",
          resultCardAfterMeal: "ì‹í›„ ìš´ë™ (ë”± ì´ë§Œí¼)",
          resultCardGlucose: "í˜ˆë‹¹/ê°„ì‹ ê´€ë¦¬ íŒ",
          resultCardIF: "ê°„í—ì  ë‹¨ì‹ (ê°€ëŠ¥í•˜ë©´)",
          resultCardWorkout: "ìš´ë™ êµ¬ì„± ì œì•ˆ",
          resultDisclaimer: "ì°¸ê³ : ë³¸ ê²°ê³¼ëŠ” ì¬ë¯¸ + ì¼ë°˜ ì •ë³´ ëª©ì ì…ë‹ˆë‹¤. ê°œì¸ ê±´ê°• ìƒíƒœ/ì§ˆí™˜/ì•½ ë³µìš© ë“±ì´ ìˆìœ¼ë©´ ì „ë¬¸ê°€ ìƒë‹´ì´ ì•ˆì „í•©ë‹ˆë‹¤."
        },
        en: {
          metaTitle: "BMI Survey | Fun Diet Plan",
          metaDescription: "A fun step-by-step BMI survey that gives personalized diet tips based on your style.",
          title: "BMI Survey Diet Plan",
          subtitle: "Click once. Enter numbers once. And the result... surprisingly helpful.",
          restartBtn: "Start Over",
          stepLabel: "STEP {current} / {total}",
          resultLabel: "RESULT / 7",
          // Step 1
          step1Title: "What's your goal?",
          step1Desc: "Plans vary based on your personality (?)",
          goalFatloss: "Fat Loss",
          goalFatlossDesc: "Focus on reducing body fat",
          goalRecomp: "Body Recomposition",
          goalRecompDesc: "Maintain muscle, improve lines",
          goalHealth: "Healthy Habits",
          goalHealthDesc: "Sustainable long-term approach",
          goalQuickstart: "Quick Start",
          goalQuickstartDesc: "Getting started is half the battle",
          step1Hint: "Selection automatically moves to the next step.",
          // Step 2
          step2Title: "What's your eating style?",
          step2Desc: "Recommendations based on your \"realistic routine\".",
          eatingSnacker: "Snacker Type",
          eatingSnackerDesc: "Frequent small snacks",
          eatingBigmeals: "Big Meals Type",
          eatingBigmealsDesc: "Large meals at once",
          eatingLate: "Late Night Eater",
          eatingLateDesc: "Stronger at night",
          eatingRegular: "Regular Eater",
          eatingRegularDesc: "Generally consistent pattern",
          // Step 3
          step3Title: "What's your exercise type?",
          step3Desc: "Reflected in \"post-meal/strength/cardio\" ratio recommendations.",
          activityNone: "Almost None",
          activityNoneDesc: "Just thinking about it now...",
          activityWalk: "Walking/Light",
          activityWalkDesc: "Good at walking (good)",
          activityGym: "Strength Focused",
          activityGymDesc: "Gym/home workout to maintain muscle",
          activityMixed: "Mixed",
          activityMixedDesc: "Moderate cardio + strength",
          // Step 4
          step4Title: "What's your \"hunger pattern\"?",
          step4Desc: "Reflected in intermittent fasting/blood sugar management/meal timing recommendations.",
          hungerMorning: "Hungry from Morning",
          hungerMorningDesc: "Stomach wakes up with me",
          hungerEvening: "Evening Explosion",
          hungerEveningDesc: "Hunger doesn't clock out when I do",
          hungerRandom: "Random",
          hungerRandomDesc: "Free-spirited hunger",
          hungerStable: "Generally Stable",
          hungerStableDesc: "Has a pattern",
          // Step 5
          step5Title: "What's your height in cm?",
          step5Desc: "Enter numbers only once. (Twice is... annoying)",
          heightLabel: "Height (cm)",
          heightPlaceholder: "e.g. 170",
          heightHint: "Unit is cm. (Entering in m will mess up BMI)",
          // Step 6
          step6Title: "What's your weight in kg?",
          step6Desc: "Only once here too. (Honesty is the first step to health)",
          weightLabel: "Weight (kg)",
          weightPlaceholder: "e.g. 65",
          weightHint: "Unit is kg. (30kg of muscle already puts you in the top tier)",
          // Buttons
          btnPrev: "Previous",
          btnNext: "Next",
          btnViewResult: "View Result",
          btnRestartSurvey: "Restart Survey",
          btnCopyResult: "Copy Result Text",
          btnMoreTests: "Explore More Tests",
          // Result
          resultGenerating: "ğŸ§¾ Generating resultâ€¦",
          bmiLocation: "BMI position: {value} ({status})",
          bmiScaleUnder: "Underweight 18.5",
          bmiScaleNormal: "Normal 23",
          bmiScaleOver: "Overweight 25",
          bmiScaleObese: "Obese 30+",
          resultCardOneLiner: "Your Custom \"Key One-Liner\"",
          resultCardPriority: "This Week's Priority #1",
          resultCardAfterMeal: "Post-Meal Exercise (Just This Much)",
          resultCardGlucose: "Blood Sugar/Snack Management Tips",
          resultCardIF: "Intermittent Fasting (If Possible)",
          resultCardWorkout: "Exercise Composition Suggestion",
          resultDisclaimer: "Note: This result is for fun + general information purposes. If you have personal health conditions/diseases/medications, professional consultation is safer.",
          // BMI status
          bmiStatusLow: "Low",
          bmiStatusNormal: "Normal range",
          bmiStatusHigh: "High",
          bmiStatusVeryHigh: "Very high",
          // Goal words
          goalWordFatloss: "Fat Loss",
          goalWordRecomp: "Body Recomposition",
          goalWordHealth: "Healthy Habits",
          goalWordQuickstart: "Quick Start",
          // Eating words
          eatingWordSnacker: "Frequent snacker",
          eatingWordBigmeals: "Large meals at once",
          eatingWordLate: "Strong at night",
          eatingWordRegular: "Stable pattern",
          // Hunger words
          hungerWordMorning: "Morning hunger strong",
          hungerWordEvening: "Evening explosion type",
          hungerWordRandom: "Random hunger",
          hungerWordStable: "Hunger stable",
          // Fun lines
          funLineSpeed1: "Just do \"exactly 3 things\" from today. (BMI {bmi} / {status})",
          funLineSpeed2: "Keep plans short, execution long. You already pressed start.",
          funLineFocus1: "Fat loss mode ON. Now all that's left... negotiating with snacks.",
          funLineFocus2: "BMI is a number, results are habits. (It gets interesting from here)",
          funLineShape1: "Muscle is precious. Fat... is negotiable.",
          funLineShape2: "Body recomposition is about 'moderation'. Too much won't last long.",
          funLineSteady1: "Consistency wins. You're already halfway there.",
          funLineSteady2: "Not rushing is often the truly fast path.",
          // One liner template
          oneLinerTemplate: "{goal} + {eating} + {hunger} â†’ \"Reality-based plan\" is the best fit type.",
          // Priority tips
          priorityLate: "Late-night defense: Finish dinner with 'protein/veggies' + only 'planned' late-night snacks.",
          prioritySnacker: "Snack restructuring: Replace with 'protein snacks' + allow snack time only 2 times (exactly).",
          priorityEvening: "Prevent evening explosion: Boost protein/fiber in afternoon (don't make fasting too long).",
          priorityNone: "Minimum exercise: Fix at 10-min post-meal walk (surprisingly powerful).",
          priorityDefault: "Basics: Get as close to 7 hours sleep + prioritize water/protein first.",
          // After meal tips
          afterMealNone: "10-min post-meal walk (indoor stepping in place OK).",
          afterMealWalk: "12~15-min brisk post-meal walk (conversation possible, singing slightly hard).",
          afterMealGym: "10-min light post-meal walk + strength '1~2 hours after meal' is comfortable.",
          afterMealDefault: "10~15-min post-meal walk + 2~3 light strength sessions per week (consistency wins).",
          // Glucose tips
          glucoseBase: "Meal order: Veggies/protein â†’ carbs (last priority). 'Calorie-free' drinks are advantageous.",
          glucoseSnacker: " Snacks as 'protein+fiber' combo (yogurt/nuts/boiled eggs, etc.).",
          glucoseBigmeals: " For large meals, halve 'carbs' and increase veggies/protein for balance.",
          glucoseLate: " Late hours: End with 'light protein' to reduce next-day fasting explosion.",
          // IF tips
          ifMorning: "If morning hunger is strong, 'morning protein' fits better than forced intermittent fasting.",
          ifEvening: "Evening explosion type: Start with 'light time restriction' like 12:12 (cut late-night).",
          ifLate: "If late-night eating is frequent, start with 12:12 (e.g. 9pm~9am fast) â†’ adjust gradually as adapted.",
          ifDefault: "Safe option: Start from 12:12 (without rushing). If hunger/sleep breaks down, immediately ease up. That's the answer.",
          // Workout tips
          workoutNone: "5 days/week: 10-min post-meal walk + 2 days/week: 10-min squats/push-ups/planks (very lightly).",
          workoutWalk: "4~5 days/week: 30-min walk + 2 days/week: 15-min lower body/core (knee-comfortable range).",
          workoutGym: "2~4 strength sessions/week (full-body focus) + daily NEAT (walk/stairs) to raise 'total activity'.",
          workoutDefault: "2~3 strength sessions/week + 2~3 cardio sessions/week (20~30min) + 10-min post-meal walk (for blood sugar/habit)."
        }
      };
      const defaultLang = "ko";
      const supportedLangs = ["ko", "en"];
      let currentLang = defaultLang;
      function t(key, vars = {}) {
        const langTable = translations[currentLang] || translations.ko;
        const template = langTable?.[key] ?? translations.ko?.[key] ?? key;
        if (typeof template !== "string") return template;
        return template.replace(/\{(\w+)\}/g, (_, token) =>
          vars[token] !== undefined ? vars[token] : `{${token}}`
        );
      }
      function applyTranslations() {
        document.title = t("metaTitle");
        const desc = document.querySelector('meta[name="description"]');
        if (desc) desc.setAttribute("content", t("metaDescription"));
        document.documentElement.lang = currentLang;
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          if (el.tagName === "INPUT" && el.dataset.i18nPlaceholder) {
            el.placeholder = t(el.dataset.i18nPlaceholder);
          } else if (el.tagName === "LABEL" || el.tagName === "H1" || el.tagName === "H2" || el.tagName === "H3" || el.tagName === "P" || el.tagName === "SPAN" || el.tagName === "BUTTON" || el.tagName === "DIV") {
            el.textContent = t(el.dataset.i18n);
          } else {
            el.textContent = t(el.dataset.i18n);
          }
        });
        document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
          el.placeholder = t(el.dataset.i18nPlaceholder);
        });
      }
      function setLang(lang, options = {}) {
        const nextLang = translations[lang] ? lang : defaultLang;
        currentLang = nextLang;
        document.documentElement.lang = nextLang;
        localStorage.setItem("preferredLang", nextLang);
        document.querySelectorAll(".lang-switch button").forEach((button) => {
          button.classList.toggle("active", button.dataset.lang === nextLang);
        });
        applyTranslations();
        if (typeof showStep === "function" && typeof current !== "undefined" && current) {
          showStep(current);
        }
        if (typeof renderResult === "function" && typeof current !== "undefined" && current === 7) {
          renderResult();
        }
        if (options.updateUrl) {
          const url = new URL(window.location.href);
          url.searchParams.set("lang", nextLang);
          window.history.replaceState({}, "", url);
        }
      }
      function detectLang() {
        const params = new URLSearchParams(window.location.search);
        const paramLang = params.get("lang");
        if (supportedLangs.includes(paramLang)) return paramLang;
        const stored = localStorage.getItem("preferredLang");
        if (supportedLangs.includes(stored)) return stored;
        const browserLang =
          navigator.languages && navigator.languages.length
            ? navigator.languages[0]
            : navigator.language;
        if (browserLang && browserLang.toLowerCase().startsWith("ko")) {
          return "ko";
        }
        return defaultLang;
      }
      document.querySelectorAll(".lang-switch button").forEach((button) => {
        button.addEventListener("click", () => {
          setLang(button.dataset.lang, { updateUrl: true });
        });
      });
      setLang(detectLang(), { updateUrl: false });

      const SERVICE_NAME_KO = "BMI ì„¤ë¬¸í˜• ë‹¤ì´ì–´íŠ¸ í”Œëœ";
      const SERVICE_OG_TEXT_EN = "BMI Survey Diet Plan"; // âœ… og:image textì— ë“¤ì–´ê°ˆ ì˜ì–´
      const FAVICON_TEXT = "BMI"; // âœ… íŒŒë¹„ì½˜ì— ì°í 1~3ê¸€ì(ì˜ë¬¸ ê¶Œì¥)

      // ì œëª© ì ìš©
      document.getElementById("serviceTitle").textContent = SERVICE_NAME_KO;

      // og:imageì˜ textë¥¼ ê°•ì œë¡œ ì„œë¹„ìŠ¤ ë§ì¶¤(ì˜ë¬¸)
      // (ì •ì  HTMLì´ë¼ë„, ì„œë¹„ìŠ¤ë³„ í…œí”Œë¦¿í™”í•  ë•Œ ì—¬ê¸°ë§Œ ë°”ê¿”ë„ ë¨)
      const og = document.querySelector('meta[property="og:image"]');
      const tw = document.querySelector('meta[name="twitter:image"]');
      const ogText = encodeURIComponent(
        SERVICE_OG_TEXT_EN.trim().replace(/\s+/g, "+")
      );
      const ogUrl = `https://dummyimage.com/1200x630/0f172a/ffffff&text=${ogText}`;
      if (og) og.setAttribute("content", ogUrl);
      if (tw) tw.setAttribute("content", ogUrl);

      // íŒŒë¹„ì½˜ data URI ìë™ ìƒì„±(ì„œë¹„ìŠ¤ë§ˆë‹¤ ê¸€ìë§Œ ë°”ê¾¸ë©´ ë¨)
      const faviconSvg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
      <rect width="100" height="100" rx="22" fill="#0f172a"/>
      <text x="50" y="64" font-size="44" text-anchor="middle" fill="white"
            font-family="system-ui, -apple-system, Segoe UI, Roboto">
        ${escapeXml(FAVICON_TEXT)}
      </text>
    </svg>`;
      const faviconHref =
        "data:image/svg+xml," + encodeURIComponent(faviconSvg);
      document.getElementById("favicon").setAttribute("href", faviconHref);

      function escapeXml(s) {
        return String(s).replace(
          /[<>&'"]/g,
          (c) =>
            ({
              "<": "&lt;",
              ">": "&gt;",
              "&": "&amp;",
              "'": "&apos;",
              '"': "&quot;",
            }[c])
        );
      }

      /***************
       * ì„¤ë¬¸ ë¡œì§
       ***************/
      // current ë³€ìˆ˜ë¥¼ ë¨¼ì € ì„ ì–¸ (setLangì—ì„œ ì°¸ì¡°í•˜ê¸° ì „ì—)
      let current = 1;
      const LAST_STEP = 6; // 1~6ì€ ì…ë ¥, 7ì€ ê²°ê³¼(result)

      const state = {
        goal: null,
        eating: null,
        activity: null,
        hunger: null,
        heightCm: null,
        weightKg: null,
      };

      const steps = [...document.querySelectorAll(".step")];
      const resultEl = document.getElementById("result");
      const stepLabel = document.getElementById("stepLabel");
      const bar = document.getElementById("bar");
      const restartBtn = document.getElementById("restartBtn");

      function showStep(n) {
        current = n;
        steps.forEach((s) =>
          s.classList.toggle("active", Number(s.dataset.step) === n)
        );
        resultEl.classList.remove("show");

        const total = 7; // ê²°ê³¼ê¹Œì§€ í¬í•¨ í‘œì‹œ
        stepLabel.textContent = t("stepLabel", { current: n, total });
        const progress = Math.round(((n - 1) / (total - 1)) * 100);
        bar.style.width = progress + "%";
      }

      function showResult() {
        stepLabel.textContent = t("resultLabel");
        bar.style.width = "100%";
        steps.forEach((s) => s.classList.remove("active"));
        resultEl.classList.add("show");
        renderResult();
      }

      // ì„ íƒ ë²„íŠ¼ ì²˜ë¦¬
      document.addEventListener("click", (e) => {
        const btn = e.target.closest(".choice");
        if (!btn) return;

        const key = btn.dataset.key;
        const val = btn.dataset.val;

        // ê°™ì€ ê·¸ë£¹ ë‚´ aria-pressed ë¦¬ì…‹
        const group = btn.parentElement;
        [...group.querySelectorAll(".choice")].forEach((b) =>
          b.setAttribute("aria-pressed", "false")
        );
        btn.setAttribute("aria-pressed", "true");
        state[key] = val;

        // "ë”¸ê° í•œë²ˆ" ì»¨ì…‰: ì„ íƒí•˜ë©´ ìë™ ë‹¤ìŒ
        const stepEl = btn.closest(".step");
        const stepNum = Number(stepEl.dataset.step);
        // 1~4ëŠ” ìë™ ë‹¤ìŒ
        if (stepNum >= 1 && stepNum <= 4) goNext(stepEl);
      });

      // prev/next ì²˜ë¦¬
      document.addEventListener("click", (e) => {
        if (e.target.matches("[data-prev]")) {
          showStep(Math.max(1, current - 1));
        }
        if (e.target.matches("[data-next]")) {
          const stepEl = e.target.closest(".step");
          goNext(stepEl);
        }
      });

      restartBtn.addEventListener("click", () => resetAll());
      document.getElementById("finishBtn").addEventListener("click", () => {
        const stepEl = document.querySelector('.step[data-step="6"]');
        if (!validateStep(stepEl)) return;
        showResult();
      });

      document.getElementById("backToSurvey").addEventListener("click", () => {
        // ê²°ê³¼ì—ì„œ ë‹¤ì‹œ 1ë‹¨ê³„ë¡œ
        showStep(1);
      });

      document.getElementById("copyBtn").addEventListener("click", async () => {
        const text = `[BMI Survey Result]
BMI: ${document.getElementById("bmiBig").textContent}
${document.getElementById("badge").textContent}
${document.getElementById("oneLiner").textContent}
- Priority: ${document.getElementById("priorityTip").textContent}
- After meal: ${document.getElementById("afterMeal").textContent}
- Glucose: ${document.getElementById("glucose").textContent}
- IF: ${document.getElementById("ifTip").textContent}
- Workout: ${document.getElementById("workout").textContent}
`;
        try {
          await navigator.clipboard.writeText(text);
          alert("ë³µì‚¬ ì™„ë£Œ! (ì´ì œ ì¹œêµ¬ì—ê²Œ ìë‘â€¦ ì•„ë‹ˆ ê³µìœ  ê°€ëŠ¥)");
        } catch {
          alert("ë³µì‚¬ ì‹¤íŒ¨. ë¸Œë¼ìš°ì € ê¶Œí•œì„ í™•ì¸í•´ ì£¼ì„¸ìš”.");
        }
      });

      function goNext(stepEl) {
        if (!validateStep(stepEl)) return;
        const next = Math.min(LAST_STEP, current + 1);
        showStep(next);
      }

      function warn(stepEl, message) {
        const w = stepEl.querySelector(".warn");
        if (!w) return;
        w.style.display = "block";
        w.textContent = "âš ï¸ " + message;
      }
      function clearWarn(stepEl) {
        const w = stepEl.querySelector(".warn");
        if (!w) return;
        w.style.display = "none";
        w.textContent = "";
      }

      function validateStep(stepEl) {
        clearWarn(stepEl);
        const n = Number(stepEl.dataset.step);

        if (n === 1 && !state.goal) {
          warn(stepEl, "ëª©í‘œë¥¼ í•˜ë‚˜ ê³¨ë¼ì£¼ì„¸ìš”.");
          return false;
        }
        if (n === 2 && !state.eating) {
          warn(stepEl, "ì‹ì‚¬ ìŠ¤íƒ€ì¼ì„ í•˜ë‚˜ ê³¨ë¼ì£¼ì„¸ìš”.");
          return false;
        }
        if (n === 3 && !state.activity) {
          warn(stepEl, "ìš´ë™ íƒ€ì…ì„ í•˜ë‚˜ ê³¨ë¼ì£¼ì„¸ìš”.");
          return false;
        }
        if (n === 4 && !state.hunger) {
          warn(stepEl, "ë°°ê³ í”” íŒ¨í„´ì„ í•˜ë‚˜ ê³¨ë¼ì£¼ì„¸ìš”.");
          return false;
        }

        if (n === 5) {
          const h = Number(document.getElementById("height").value);
          if (!Number.isFinite(h)) {
            warn(stepEl, "í‚¤ë¥¼ ìˆ«ìë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
            return false;
          }
          if (h < 80 || h > 230) {
            warn(stepEl, "í‚¤(cm) ë²”ìœ„ê°€ ì¡°ê¸ˆ ì´ìƒí•´ìš”. ë‹¨ìœ„ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.");
            return false;
          }
          state.heightCm = h;
        }

        if (n === 6) {
          const w = Number(document.getElementById("weight").value);
          if (!Number.isFinite(w)) {
            warn(stepEl, "ëª¸ë¬´ê²Œë¥¼ ìˆ«ìë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
            return false;
          }
          if (w < 20 || w > 250) {
            warn(
              stepEl,
              "ëª¸ë¬´ê²Œ(kg) ë²”ìœ„ê°€ ì¡°ê¸ˆ ì´ìƒí•´ìš”. ë‹¨ìœ„ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”."
            );
            return false;
          }
          state.weightKg = w;
        }

        return true;
      }

      function resetAll() {
        state.goal = state.eating = state.activity = state.hunger = null;
        state.heightCm = state.weightKg = null;

        // aria-pressed ì´ˆê¸°í™”
        document
          .querySelectorAll(".choice")
          .forEach((b) => b.setAttribute("aria-pressed", "false"));
        document.getElementById("height").value = "";
        document.getElementById("weight").value = "";

        showStep(1);
      }

      /***************
       * ê²°ê³¼ ìƒì„± ë¡œì§(â€œì„¤ë¬¸ ìŠ¤íƒ€ì¼ì— ë§ì¶°â€ ì¬ë°Œê²Œ + ë‹¤ì´ì–´íŠ¸ íŒ)
       ***************/
      function bmiClassify(bmi) {
        const isKo = currentLang === "ko";
        if (bmi < 18.5)
          return { label: "Underweight", ko: "ì €ì²´ì¤‘", emoji: "ğŸƒ", text: isKo ? "ì €ì²´ì¤‘" : "Underweight" };
        if (bmi < 23) return { label: "Normal", ko: "ì •ìƒ", emoji: "ğŸŒ¿", text: isKo ? "ì •ìƒ" : "Normal" };
        if (bmi < 25) return { label: "Overweight", ko: "ê³¼ì²´ì¤‘", emoji: "ğŸ", text: isKo ? "ê³¼ì²´ì¤‘" : "Overweight" };
        if (bmi < 30) return { label: "Obese", ko: "ë¹„ë§Œ", emoji: "ğŸ”", text: isKo ? "ë¹„ë§Œ" : "Obese" };
        return { label: "Severely Obese", ko: "ê³ ë„ë¹„ë§Œ", emoji: "ğŸš¨", text: isKo ? "ê³ ë„ë¹„ë§Œ" : "Severely Obese" };
      }

      function bmiStatus(bmi) {
        if (bmi < 18.5) return t("bmiStatusLow");
        if (bmi < 23) return t("bmiStatusNormal");
        if (bmi < 25) return t("bmiStatusHigh");
        if (bmi < 30) return t("bmiStatusHigh");
        return t("bmiStatusVeryHigh");
      }

      function bmiToPercent(bmi) {
        const min = 15;
        const max = 35;
        const clamped = Math.min(max, Math.max(min, bmi));
        return ((clamped - min) / (max - min)) * 100;
      }

      function renderResult() {
        const hM = state.heightCm / 100;
        const bmi = state.weightKg / (hM * hM);
        const b = Math.round(bmi * 10) / 10;
        const c = bmiClassify(bmi);

        const status = bmiStatus(bmi);
        document.getElementById(
          "badge"
        ).textContent = `${c.emoji} ${c.text} (${c.label})`;
        document.getElementById("bmiBig").textContent = `${b.toFixed(1)} BMI`;
        document.getElementById("funLine").textContent = funLineByProfile(
          b,
          c.text
        );
        document.getElementById(
          "bmiCaption"
        ).textContent = t("bmiLocation", { value: b.toFixed(1), status: status });
        document.getElementById("bmiMarker").style.left = `${bmiToPercent(
          bmi
        )}%`;

        // ë§ì¶¤ íŒ ìƒì„±
        const one = oneLinerByProfile();
        const pri = priorityByProfile();
        const after = afterMealTip();
        const glu = glucoseTip();
        const ift = ifTip();
        const wo = workoutTip();

        document.getElementById("oneLiner").textContent = one;
        document.getElementById("priorityTip").textContent = pri;
        document.getElementById("afterMeal").textContent = after;
        document.getElementById("glucose").textContent = glu;
        document.getElementById("ifTip").textContent = ift;
        document.getElementById("workout").textContent = wo;
      }

      function funLineByProfile(bmi, bmiText) {
        const mood =
          state.goal === "quickstart"
            ? "speed"
            : state.goal === "fatloss"
            ? "focus"
            : state.goal === "recomp"
            ? "shape"
            : "steady";

        const lines = {
          speed: [
            t("funLineSpeed1", { bmi: bmi.toFixed(1), status: bmiText }),
            t("funLineSpeed2"),
          ],
          focus: [
            t("funLineFocus1"),
            t("funLineFocus2"),
          ],
          shape: [
            t("funLineShape1"),
            t("funLineShape2"),
          ],
          steady: [
            t("funLineSteady1"),
            t("funLineSteady2"),
          ],
        };

        const pool = lines[mood] || lines.steady;
        return pool[Math.floor(Math.random() * pool.length)];
      }

      function oneLinerByProfile() {
        // goal + eating + hunger ì¡°í•©ìœ¼ë¡œ í•œ ì¤„ ìºë¦­í„°í™”
        const goalWord =
          {
            fatloss: t("goalWordFatloss"),
            recomp: t("goalWordRecomp"),
            health: t("goalWordHealth"),
            quickstart: t("goalWordQuickstart"),
          }[state.goal] || t("goalWordQuickstart");

        const eater =
          {
            snacker: t("eatingWordSnacker"),
            bigmeals: t("eatingWordBigmeals"),
            late: t("eatingWordLate"),
            regular: t("eatingWordRegular"),
          }[state.eating] || t("eatingWordRegular");

        const hunger =
          {
            morning: t("hungerWordMorning"),
            evening: t("hungerWordEvening"),
            random: t("hungerWordRandom"),
            stable: t("hungerWordStable"),
          }[state.hunger] || t("hungerWordStable");

        return t("oneLinerTemplate", { goal: goalWord, eating: eater, hunger: hunger });
      }

      function priorityByProfile() {
        // ê°€ì¥ "íš¨ìœ¨ ì¢‹ì€ í•œ ê°€ì§€"ë§Œ ì¶”ì²œ
        if (state.eating === "late") {
          return t("priorityLate");
        }
        if (state.eating === "snacker") {
          return t("prioritySnacker");
        }
        if (state.hunger === "evening") {
          return t("priorityEvening");
        }
        if (state.activity === "none") {
          return t("priorityNone");
        }
        return t("priorityDefault");
      }

      function afterMealTip() {
        // ì‹í›„ ìš´ë™: í˜ˆë‹¹ê´€ë¦¬/NEAT ê´€ì ì˜ ì¼ë°˜ì  ì¶”ì²œ(ê°œì¸ ì§ˆí™˜ ê³ ë ¤ëŠ” ë³„ë„)
        if (state.activity === "none")
          return t("afterMealNone");
        if (state.activity === "walk")
          return t("afterMealWalk");
        if (state.activity === "gym")
          return t("afterMealGym");
        return t("afterMealDefault");
      }

      function glucoseTip() {
        // í˜ˆë‹¹/ì‹ìŠµê´€: ìˆœì„œ/êµ¬ì„± íŒ
        const base = t("glucoseBase");
        if (state.eating === "snacker") {
          return base + t("glucoseSnacker");
        }
        if (state.eating === "bigmeals") {
          return base + t("glucoseBigmeals");
        }
        if (state.eating === "late") {
          return base + t("glucoseLate");
        }
        return base;
      }

      function ifTip() {
        // ê°„í—ì  ë‹¨ì‹ì€ "ê°€ëŠ¥í•˜ë©´/ì í•©í•˜ë©´"ë¡œ ì•ˆë‚´ (ê°•ìš” X)
        if (state.hunger === "morning") {
          return t("ifMorning");
        }
        if (state.hunger === "evening") {
          return t("ifEvening");
        }
        if (state.eating === "late") {
          return t("ifLate");
        }
        return t("ifDefault");
      }

      function workoutTip() {
        // ìš´ë™ êµ¬ì„± ì¶”ì²œ: í™œë™ íƒ€ì… ê¸°ë°˜
        if (state.activity === "none") {
          return t("workoutNone");
        }
        if (state.activity === "walk") {
          return t("workoutWalk");
        }
        if (state.activity === "gym") {
          return t("workoutGym");
        }
        return t("workoutDefault");
      }

      // ì‹œì‘
      showStep(1);
    </script>
  </body>
</html>
